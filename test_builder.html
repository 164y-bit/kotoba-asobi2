<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ver 1.00 - レイアウト砂場ツール (The Stage Builder)</title>
    <style>
        :root { --g-blue: #4285F4; --g-red: #EA4335; --g-yellow: #FBBC05; --g-green: #34A853; }
        body { background: #202124; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: flex-start; gap: 20px; padding: 20px; margin: 0; }

        /* ステージ外枠 */
        #iphone-frame { 
            width: 375px; height: 812px; background: #fff; position: relative; overflow: hidden;
            border-radius: 40px; border: 10px solid #444; box-sizing: border-box; flex-shrink: 0;
        }

        /* 3層構造（アタリ） */
        .area-jiji { position: absolute; top: 0; width: 100%; height: 20%; background: rgba(66, 133, 244, 0.2); border-bottom: 1px dashed var(--g-blue); }
        .area-mid { position: absolute; top: 20%; width: 100%; height: 35%; background: #fff; }
        .area-kaito { position: absolute; top: 55%; width: 100%; height: 45%; background: rgba(251, 188, 5, 0.2); border-top: 1px dashed var(--g-yellow); }

        /* 動かすパーツの基本形 */
        .movable { 
            position: absolute; border: 2px solid #333; display: flex; align-items: center; 
            justify-content: center; font-size: 10px; font-weight: bold; cursor: move; 
            box-sizing: border-box; background: rgba(255,255,255,0.8);
        }
        .selected { border: 3px solid var(--g-red) !important; box-shadow: 0 0 15px var(--g-red); z-index: 1000 !important; }

        /* コントローラー */
        #controller { width: 300px; background: #333; padding: 20px; border-radius: 12px; display: flex; flex-direction: column; gap: 10px; }
        .control-group { border-bottom: 1px solid #555; padding-bottom: 10px; }
        .btn-row { display: flex; gap: 5px; margin-top: 5px; }
        button { flex: 1; padding: 8px; cursor: pointer; background: #555; color: white; border: none; border-radius: 4px; font-weight: bold; }
        button:active { background: var(--g-blue); }
        select { padding: 10px; border-radius: 4px; background: #eee; width: 100%; font-weight: bold; }

        #output { background: #000; color: var(--g-green); padding: 10px; font-family: monospace; font-size: 12px; white-space: pre-wrap; border-radius: 4px; margin-top: 10px; }
        #msg-small { position: absolute; bottom: 10px; left: 10px; font-size: 12px; color: #666; width: 150px; }
    </style>
</head>
<body>

    <div id="iphone-frame">
        <div class="area-jiji"></div>
        <div class="area-mid"></div>
        <div class="area-kaito"></div>

        <div id="target-jiji-icon" class="movable" style="top: 20px; left: 150px; width: 70px; height: 70px; border-radius: 50%;">じじアイコン</div>
        <div id="target-jiji-card" class="movable" style="top: 100px; left: 100px; width: 30px; height: 62px;">じじ札</div>
        <div id="target-main-card" class="movable" style="top: 300px; left: 135px; width: 105px; height: 215px;">正解カード</div>
        <div id="target-retry-btn" class="movable" style="top: 400px; left: 280px; width: 80px; height: 80px; border-radius: 50%;">もう一回</div>
        <div id="target-msg-large" class="movable" style="top: 250px; left: 50px; width: 275px; height: 50px;">メッセージ大</div>

        <div id="msg-small">ログ: 準備完了</div>
    </div>

    <div id="controller">
        <h3>Stage Builder v1.0</h3>
        <div class="control-group">
            <label>対象を選択:</label>
            <select id="part-selector" onchange="selectPart()">
                <option value="target-jiji-icon">じじアイコン</option>
                <option value="target-jiji-card">じじカード</option>
                <option value="target-main-card">正解カード</option>
                <option value="target-retry-btn">もう一回ボタン</option>
                <option value="target-msg-large">メッセージ大</option>
            </select>
        </div>

        <div class="control-group">
            <label>位置 (X / Y)</label>
            <div class="btn-row">
                <button onclick="move('left', -1)">X-1</button><button onclick="move('left', 1)">X+1</button>
                <button onclick="move('left', -10)">X-10</button><button onclick="move('left', 10)">X+10</button>
            </div>
            <div class="btn-row">
                <button onclick="move('top', -1)">Y-1</button><button onclick="move('top', 1)">Y+1</button>
                <button onclick="move('top', -10)">Y-10</button><button onclick="move('top', 10)">Y+10</button>
            </div>
        </div>

        <div class="control-group">
            <label>サイズ (W / H)</label>
            <div class="btn-row">
                <button onclick="move('width', -1)">W-1</button><button onclick="move('width', 1)">W+1</button>
                <button onclick="move('height', -1)">H-1</button><button onclick="move('height', 1)">H+1</button>
            </div>
        </div>

        <button style="background: var(--g-green);" onclick="exportCSS()">CSS出力を生成</button>
        <div id="output">ここにコードが出ます</div>
    </div>

    <script>
        let currentTarget = null;

        function selectPart() {
            const id = document.getElementById('part-selector').value;
            if(currentTarget) currentTarget.classList.remove('selected');
            currentTarget = document.getElementById(id);
            currentTarget.classList.add('selected');
            log(`選択中: ${id}`);
        }

        function move(prop, delta) {
            if(!currentTarget) return;
            let val = parseInt(currentTarget.style[prop]) || 0;
            currentTarget.style[prop] = (val + delta) + 'px';
            log(`${prop}: ${val + delta}px`);
        }

        function log(m) {
            document.getElementById('msg-small').innerText = "ログ: " + m;
        }

        function exportCSS() {
            const parts = ['target-jiji-icon', 'target-jiji-card', 'target-main-card', 'target-retry-btn', 'target-msg-large'];
            let css = "/* ジェミナイさん、この数値を反映して！ */\n";
            parts.forEach(id => {
                const el = document.getElementById(id);
                css += `#${id} { left: ${el.style.left}; top: ${el.style.top}; width: ${el.style.width}; height: ${el.style.height}; }\n`;
            });
            document.getElementById('output').innerText = css;
        }

        // 初期選択
        selectPart();
    </script>
</body>
</html>
