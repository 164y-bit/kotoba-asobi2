<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            /* 背景画像（可愛い森） */
            background-image: url('https://img.freepik.com/free-vector/cartoon-forest-landscape-background_23-2148902598.jpg');
            background-size: cover; background-position: center;
            height: 100vh; margin: 0; overflow: hidden; font-family: sans-serif;
            display: flex; flex-direction: column; align-items: center;
        }

        /* デバッグ情報（いつでも消せる！） */
        #debug-panel { 
            background: rgba(0,0,0,0.7); color: white; padding: 10px; width: 100%; font-size: 0.8rem; 
            display: block; /* 後で JavaScript で none にして隠せる */
        }

        .card {
            width: 80px; height: 110px; background: white; border: 3px solid #FF69B4; border-radius: 10px;
            display: flex; align-items: center; justify-content: center; font-size: 2.5rem;
            position: absolute; bottom: 50px; transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        .played { transform: translateY(-300px) scale(1.2) rotate(10deg); }

        /* キラキラの粒 */
        .sparkle {
            position: absolute; pointer-events: none;
            width: 10px; height: 10px; background: yellow; border-radius: 50%;
            animation: fly 1s forwards;
        }
        @keyframes fly {
            0% { transform: translate(0,0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)); opacity: 0; }
        }

        #msg-bubble { 
            background: white; border-radius: 20px; padding: 10px 20px; 
            margin-top: 100px; font-weight: bold; font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <div id="debug-panel">
        <strong>ファイル名:</strong> test4.html | <strong>目的:</strong> 演出と設定切り替え <br>
        <button onclick="toggleDebug()">デバッグ表示を隠す</button>
    </div>

    <div id="msg-bubble">カードをタップしてね！</div>

    <div id="myCard" class="card" onclick="playEffect(this)">あ</div>

    <script>
        function toggleDebug() {
            const panel = document.getElementById('debug-panel');
            panel.style.display = 'none';
        }

        function playEffect(card) {
            card.classList.add('played');
            document.getElementById('msg-bubble').innerText = "キラキラ〜！！";

            // キラキラを出す
            for(let i=0; i<20; i++) {
                createSparkle(card.offsetLeft + 40, card.offsetTop - 150);
            }
        }

        function createSparkle(x, y) {
            const s = document.createElement('div');
            s.className = 'sparkle';
            s.style.left = x + 'px';
            s.style.top = y + 'px';
            // 飛び散る方向をランダムに設定
            s.style.setProperty('--tx', (Math.random()-0.5)*200 + 'px');
            s.style.setProperty('--ty', (Math.random()-0.5)*200 + 'px');
            document.body.appendChild(s);
            setTimeout(() => s.remove(), 1000);
        }
    </script>
</body>
</html>
